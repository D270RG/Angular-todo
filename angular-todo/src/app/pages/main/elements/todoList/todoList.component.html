<div className='button-cell'>
	<button type="button" class="btn btn-light text-secondary" (click)="this.setFormVisible('add')">
		<i class="bi bi-plus-square-fill"></i>
	</button>
	<form [formGroup]="sortGroup">
		<div class="form-group">
			<select  (change)="submitSortAction()" class="form-control" formControlName="field">
				<option *ngFor="let sortRecord of sortGroupOptions?.field | keyvalue" [value]="sortRecord.key">{{ sortRecord.value }}</option>
			</select>
			<select  (change)="submitSortAction()" class="form-control" formControlName="direction">
				<option *ngFor="let sortRecord of sortGroupOptions?.direction | keyvalue" [value]="sortRecord.key">{{ sortRecord.value }}</option>
			</select>
		</div>
	</form>
</div>

<table class="table table-light">
	<tbody>
		<tr class="todo-entry" *ngFor="let todo of todoListData" (click)="this.setFormVisible(todo.id)">
			<td scope="row" class="name-container">
				<span class="table-container">
					{{ todo.name }}
				</span>
			</td>
			<td>
				<span class="table-container">
					<span class="date-container">{{ todo.createdDate | date: 'dd MMM'}}</span>
					<span class="date-container">{{ todo.createdDate | date: 'HH:mm'}}</span>
				</span>
			</td>
			<td>
				<span class="table-container">
					<span class="date-container">{{ todo.updatedDate | date: 'dd MMM'}}</span>
					<span class="date-container">{{ todo.updatedDate | date: 'HH:mm'}}</span>
				</span>
			</td>
			<td class="tag-cell">
				<div class="text-muted" *ngIf="todo.tags.length===0">
					No tags
				</div>
				<tagContainer [tags]="todo.tags" [maxLength]="6" class="tag-container d-none d-lg-block"></tagContainer>	
				<tagContainer [tags]="todo.tags" [maxLength]="5" class="tag-container d-none d-md-block d-lg-none"></tagContainer>	
				<tagContainer [tags]="todo.tags" [maxLength]="4" class="tag-container d-none d-sm-block d-md-none"></tagContainer>	
				<tagContainer [tags]="todo.tags" [maxLength]="3" class="tag-container d-block d-sm-none"></tagContainer>	
			</td>	
			<td class="button-cell" (click)="$event.stopPropagation()">
				<div class="button-cell-container">
					<button type="button" class="btn btn-transparent text-danger" (click)="this.deleteForm(todo.id)">
						<i class="bi bi-trash"></i>
					</button>
				</div>
				<editForm [id]="todo.id" [initialValue]="todo" [visible]="this.formVisible===todo.id" (onClickboxClicked)="this.setFormVisible('none')"/>
			</td>
		</tr>
	</tbody>
</table>
<addForm [visible]="this.formVisible==='add'" (onClickboxClicked)="this.setFormVisible('none')"/>
