<table class="table table-striped">
	<thead>
		<tr>
			<th scope="col" sortable="name" direction='' (sort)="onSort($event)">Name</th>
			<th scope="col" sortable="created" direction='' (sort)="onSort($event)">Created</th>
			<th scope="col" sortable="updated" direction='' (sort)="onSort($event)">Updated</th>
			<th scope="col">Tags</th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<tr *ngFor="let todo of todoListData">
			<td scope="row" class="name-container">
				<span class="table-container">
					{{ todo.name }}
				</span>
			</td>
			<td>
				<span class="table-container">
					{{ todo.createdDate | date: 'dd MMM, yyyy, hh:mm'}}
				</span>
			</td>
			<td>
				<span class="table-container">
					{{ todo.updatedDate | date: 'dd MMM, yyyy, hh:mm'}}
				</span>
			</td>
			<td class="tag-cell">
				{{''//TODO: REWRITE THIS}}
				<span class="tag-container">
					<span *ngFor="let tag of todo.tags | slice:0:4" class="tag me-1 d-none d-lg-block">
						{{tag}}
					</span>
					<span *ngIf="todo.tags.length > 4" class="tag-extra d-none d-lg-block">..{{todo.tags.length-4}} more</span>

					<span *ngFor="let tag of todo.tags | slice:0:3" class="tag me-1 d-none d-md-block d-lg-none">
						{{tag}}
					</span>
					<span *ngIf="todo.tags.length > 3" class="tag-extra d-none d-md-block d-lg-none">..{{todo.tags.length-3}} more</span>

					<span *ngFor="let tag of todo.tags | slice:0:2" class="tag me-1 d-none d-sm-block d-md-none">
						{{tag}}
					</span>
					<span *ngIf="todo.tags.length > 2" class="tag-extra d-none d-sm-block d-md-none">..{{todo.tags.length-2}} more</span>

					<span *ngFor="let tag of todo.tags | slice:0:1" class="tag me-1 d-block d-sm-none">
						{{tag}}
					</span>
					<span *ngIf="todo.tags.length > 1" class="tag-extra d-block d-sm-none">..{{todo.tags.length-1}} more</span>
				</span>
			</td>	
			<td>
				<button type="button" class="btn btn-light" (click)="this.setFormVisible(todo.id)">
					<i class="bi bi-pencil-square"></i>
				</button>
				<editForm [id]="todo.id" [initialValue]="todo" [visible]="this.formVisible===todo.id" (onClickboxClicked)="this.setFormVisible('none')"/>
			</td>
		</tr>
	</tbody>
</table>

<button type="button" class="btn btn-primary" (click)="this.setFormVisible('add')">Add</button>
<addForm [visible]="this.formVisible==='add'" (onClickboxClicked)="this.setFormVisible('none')"/>
