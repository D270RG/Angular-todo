<table class="table table-light">
	<thead>
		<tr>
			<th scope="col" sortable="name" direction='' (sort)="onSort($event)">Name</th>
			<th scope="col" sortable="createdDate" direction='' (sort)="onSort($event)">Created</th>
			<th scope="col" sortable="updatedDate" direction='' (sort)="onSort($event)">Updated</th>
			<th scope="col">Tags</th>
			<th class="button-cell">
				<button type="button" class="btn btn-transparent text-secondary" (click)="this.setFormVisible('add')">
					<i class="bi bi-plus-square-fill"></i>
				</button>
			</th>
		</tr>
	</thead>
	<tbody>
		<tr class="todo-entry" *ngFor="let todo of todoListData" (click)="this.setFormVisible(todo.id)">
			<td scope="row" class="name-container">
				<span class="table-container">
					{{ todo.name }}
				</span>
			</td>
			<td>
				<span class="table-container">
					<span class="date-container">{{ todo.createdDate | date: 'dd MMM'}}</span>
					<span class="date-container">{{ todo.createdDate | date: 'HH:mm'}}</span>
				</span>
			</td>
			<td>
				<span class="table-container">
					<span class="date-container">{{ todo.updatedDate | date: 'dd MMM'}}</span>
					<span class="date-container">{{ todo.updatedDate | date: 'HH:mm'}}</span>
				</span>
			</td>
			<td class="tag-cell">
				{{''//TODO: REWRITE THIS}}
				<span class="tag-container">
					<div class="text-muted" *ngIf="todo.tags.length===0">
						No tags
					</div>
					<span [ngStyle]="{background:tag.split('&').at(-1)}" *ngFor="let tag of todo.tags | slice:0:6" class="tag d-none d-lg-block">
						{{tag.split('&').at(0)}}
					</span>	
					<span *ngIf="todo.tags.length > 6" class="tag-extra d-none d-lg-block">..{{todo.tags.length-6}} more</span>

					<span [ngStyle]="{background:tag.split('&').at(-1)}" *ngFor="let tag of todo.tags | slice:0:5" class="tag d-none d-md-block d-lg-none">
						{{tag.split('&').at(0)}}
					</span>
					<span *ngIf="todo.tags.length > 5" class="tag-extra d-none d-md-block d-lg-none">..{{todo.tags.length-5}} more</span>

					<span [ngStyle]="{background:tag.split('&').at(-1)}" *ngFor="let tag of todo.tags | slice:0:4" class="tag d-none d-sm-block d-md-none">
						{{tag.split('&').at(0)}}
					</span>
					<span *ngIf="todo.tags.length > 4" class="tag-extra d-none d-sm-block d-md-none">..{{todo.tags.length-4}} more</span>

					<span [ngStyle]="{background:tag.split('&').at(-1)}" *ngFor="let tag of todo.tags | slice:0:3" class="tag d-block d-sm-none">
						{{tag.split('&').at(0)}}
					</span>
					<span *ngIf="todo.tags.length > 3" class="tag-extra d-block d-sm-none">..{{todo.tags.length-3}} more</span>
				</span>
			</td>	
			<td class="button-cell" (click)="$event.stopPropagation()">
				<button type="button" class="btn btn-transparent text-danger" (click)="this.deleteForm(todo.id)">
					<i class="bi bi-trash"></i>
				</button>
				<editForm [id]="todo.id" [initialValue]="todo" [visible]="this.formVisible===todo.id" (onClickboxClicked)="this.setFormVisible('none')"/>
			</td>
		</tr>
	</tbody>
</table>
<addForm [visible]="this.formVisible==='add'" (onClickboxClicked)="this.setFormVisible('none')"/>
